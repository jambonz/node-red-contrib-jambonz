<!-- Javascript -->
<script type="text/javascript">
  RED.nodes.registerType('cfg',{
      category: 'jambonz',
      color: '#bbabaa',
      defaults: {
        name: {value: ''},
        tts: {value: 0},
        speechinput: {value: 0},
        vendor: {value: 'default'},
        lang: {value: 'default'},
        xlang: {},
        voice: {value: 'default'},
        xvoice: {},
        transcriptionvendor: {value: 'default'},
        vocabularyname: {},
        vocabularynameType: {value: 'str'},
        vocabularyfiltername: {},
        vocabularyfilternameType: {value: 'str'},
        vocabularyfiltermethod: {},
        identifyChannels: {},
        recognizerlang: {value: 'default'},
        recognizeraltlang: {},
        recognizeraltlangType: {val: 'str'},
        transcriptionhints: {},
        transcriptionhintsType: {val: 'str'}
      },
      inputs:1,
      outputs:1,
      icon: "font-awesome/fa-cubes",
      paletteLabel: "config",
      label: function() { return this.name || 'config';},
      oneditprepare: () => {
        var node = this;
        var ttsDiv = $('#tts-options');
        prepareTtsControls(node);
        prepareSttControls(node);

        ttsDiv.hide();
        $('#speech-input-container').hide()

        $('#node-input-transcriptionhints').typedInput({
          types: ['str', 'msg', 'flow', 'global', 'jsonata', 'env'],
          typeField: $('#node-input-transcriptionhintsType')
        });
        $('#node-input-recognizeraltlang').typedInput({
          types: ['str', 'msg', 'flow', 'global', 'jsonata', 'env'],
          typeField: $('#node-recognizeraltlangType')
        });
        $('#node-input-naics').typedInput({
          types: ['num', 'msg', 'flow', 'global', 'jsonata', 'env'],
          typeField: $('#node-input-naicsType')
        });



        $('#node-input-tts').change(function() {
          const doTTS = $('#node-input-tts:checked').val();
          if (doTTS) {
            $('#tts-options').show();
          }
          else {
            $('#tts-options').hide();
          }
        });
        var enableSpeech = function(enabled) {
          if (enabled) $('#speech-input-container').show();
          else $('#speech-input-container').hide();
        }
        $('#node-input-speechinput').change(function() {
          var doSpeech = $('#node-input-speechinput:checked').val();
          enableSpeech(doSpeech);
        });
      }
  });

</script>


<!-- HTML -->

<script type="text/html" data-template-name="cfg">
    <div class="form-row">
      <label for="node-input-name"><i class="icon-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <fieldset>
    <legend>Text to Speech</legend>
  <div class="form-row">
    <label for="node-input-tts">Modify TTS</label>
    <input type="checkbox" id="node-input-tts">
  </div>
  <div id="tts-options">
        <div class="form-row">
          <label for="node-input-vendor">Vendor</label>
          <select id="node-input-vendor">
            <option value="default" selected>--application default--</option>
            <option value="google">google</option>
            <option value="aws">aws/polly</option>
          </select>
        </div>
        <div class="form-row" style="display: none;">
          <label for="node-input-lang"> Lang</label>
          <input type="text" id="node-input-lang">
        </div>
        <div class="form-row">
          <label for="node-input-xlang">Language</label>
          <select id="node-input-xlang">
            <option value="default" selected>--application default--</option>
          </select>
        </div>
        <div class="form-row" style="display: none;">
          <label for="node-input-voice"> Voice</label>
          <input type="text" id="node-input-voice">
        </div>
        <div class="form-row">
          <label for="node-input-xvoice">Voice</label>
          <select id="node-input-xvoice">
            <option value="default" selected>--application default--</option>
          </select>
        </div>
  </div>
  <legend>Speech Input</legend>
  <div class="form-row">
    <label for="node-input-tts">Modify Speech Input</label>
    <input type="checkbox" id="node-input-speechinput">
  </div>
  <div id="speech-input-container">
    <div class="form-row">
      <label for="node-input-transcriptionvendor">Vendor</label>
      <select id="node-input-transcriptionvendor">
        <option value="default" selected>--application default--</option>
        <option value="google">Google</option>
        <option value="aws">AWS</option>
      </select>
    </div>
    <div class="form-row">
      <label for="node-input-recognizerlang"><i class="icon-tag"></i> Language</label>
      <select id="node-input-recognizerlang">
      </select>
    </div>
    <div id="google-stt-options">
      <legend>Google Transcription Options</legend>
      <div class="form-row">
        <label for="node-input-transcriptionhints">Hints</label>
        <input type="text" id="node-input-transcriptionhints" placeholder="comma-separated list of phrases">
        <input type="hidden" id="node-input-transcriptionhintsType">
      </div>
      <div class="form-row">
        <label for="node-input-recognizeraltlang">Alternative languages</label>
        <input type="text" id="node-input-recognizeraltlang" placeholder="comma-separated list of add'l lang codes">
        <input type="hidden" id="node-input-recognizeraltlangType">
      </div>
      <div class="form-row">
        <label for="node-input-naics">Industry NAICS code</label>
        <input type="text" id="node-input-naics">
        <input type="hidden" id="node-input-naicsType">
      </div>
    </div>
    <div id="aws-stt-options">
      <legend>AWS Transcription Options</legend>
      <div class="form-row">
        <label for="node-input-vocabularyname">Vocabulary name</label>
        <input type="text" id="node-input-vocabularyname">
        <input type="hidden" id="node-input-vocabularynameType">
      </div>
      <div class="form-row">
        <label for="node-input-vocabularyfiltername">Vocabulary filter name</label>
        <input type="text" id="node-input-vocabularyfiltername">
        <input type="hidden" id="node-input-vocabularyfilternameType">
      </div>
      <div class="form-row">
        <label for="node-input-vocabularyfiltername">Vocabulary filter name</label>
        <input type="text" id="node-input-identifyChannels">
      </div>
      <div class="form-row">
        <label for="node-input-vocabularyfiltermethod">Filter method</label>
        <select id="node-input-vocabularyfiltermethod">
          <option value="remove" selected>Remove</option>
          <option value="mask" selected>Mask</option>
          <option value="tag" selected>Tag</option>
        </select>
      </div>
    </div>
  </div>
  </fieldset>
</script>

<!-- Help Text -->

<script type="text/html" data-help-name="cfg">
 
  

</script>
